(venv) PS E:\MyOwn\ProgramStudy\MAS> python mas.py login --cpu

=====================================
      MultiAgentSystem (MAS)
      AI Code Review Assistant
      CPU Mode
=====================================
Login successful at 2026-01-21 21:04:45
æœªæä¾› --target-dirï¼Œä»…åˆå§‹åŒ–ç³»ç»Ÿä¾›åç»­äº¤äº’ã€‚
2026-01-21 21:04:51 - INFO - MAS - ğŸ¤– åˆå§‹åŒ–AIé©±åŠ¨æ™ºèƒ½ä½“ç³»ç»Ÿ - æ¨¡å¼: ai_driven
2026-01-21 21:04:51 - INFO - MAS - ğŸš€ æ­£åœ¨åˆå§‹åŒ–æ™ºèƒ½ä½“ç³»ç»Ÿ...
2026-01-21 21:04:51 - INFO - user_comm_agent - åˆå§‹åŒ–æ™ºèƒ½å¯¹è¯AI...
2026-01-21 21:04:51 - INFO - user_comm_agent - ğŸ”§ å¼€å§‹åˆå§‹åŒ–AIå¯¹è¯æ¨¡å‹...
2026-01-21 21:04:51 - INFO - user_comm_agent - ğŸ“¦ æ­£åœ¨åŠ è½½æ¨¡å‹: Qwen/Qwen1.5-7B-Chat
2026-01-21 21:04:51 - INFO - user_comm_agent - ğŸ’¾ ç¼“å­˜ç›®å½•: E:\MyOwn\ProgramStudy\MAS\model_cache
2026-01-21 21:04:51 - INFO - user_comm_agent - ğŸ” æ£€æµ‹åˆ°æœ¬åœ°ç¼“å­˜æ¨¡å‹æ–‡ä»¶ï¼Œå°†ä½¿ç”¨æœ¬åœ°æ–‡ä»¶åŠ è½½
2026-01-21 21:04:51 - INFO - user_comm_agent - ğŸ”§ ä½¿ç”¨Qwené…ç½®åŠ è½½tokenizer...
2026-01-21 21:04:52 - INFO - user_comm_agent - âœ… TokenizeråŠ è½½æˆåŠŸ
2026-01-21 21:04:52 - INFO - user_comm_agent - ğŸ”§ å·²è®¾ç½®padding_side
2026-01-21 21:04:52 - INFO - user_comm_agent - ğŸ’» ä½¿ç”¨è®¾å¤‡: cpu
2026-01-21 21:04:52 - INFO - user_comm_agent - ğŸ”§ æ­£åœ¨åˆ›å»ºå¯¹è¯ç”Ÿæˆpipeline...
Loading checkpoint shards: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 4/4 [00:00<00:00, 183.98it/s]
2026-01-21 21:04:52 - INFO - user_comm_agent - âœ… Pipelineåˆ›å»ºæˆåŠŸ
2026-01-21 21:04:52 - INFO - user_comm_agent - ğŸ”¥ é¢„çƒ­AIæ¨¡å‹...
2026-01-21 21:04:56 - INFO - user_comm_agent - âœ… æ¨¡å‹é¢„çƒ­æˆåŠŸ
2026-01-21 21:04:56 - INFO - user_comm_agent - ğŸ‰ AIå¯¹è¯æ¨¡å‹åˆå§‹åŒ–å®Œæˆ
2026-01-21 21:04:56 - INFO - user_comm_agent - æ™ºèƒ½å¯¹è¯AIåˆå§‹åŒ–æˆåŠŸ
2026-01-21 21:04:56 - INFO - db_manage_agent - âœ… å·²æ³¨å…¥å…±äº«æ¨¡å‹/Tokenizer
2026-01-21 21:04:56 - INFO - db_manage_agent - ğŸ”— ä½¿ç”¨å…±äº«æ¨¡å‹å®Œæˆåˆå§‹åŒ–
2026-01-21 21:04:56 - INFO - MAS - âœ… ç³»ç»Ÿå°±ç»ªï¼Œå¯ä»¥å¼€å§‹äº¤äº’
ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆã€‚å¯ä½¿ç”¨ '/analyze <dir>' æˆ–å‘½ä»¤è¡Œ 'mas login -d <dir>' åˆ†æã€‚

ğŸ’¬ è¿›å…¥äº¤äº’æ¨¡å¼ã€‚è¾“å…¥ /exit æˆ– /quit é€€å‡ºï¼Œä¼šè¯ä¿æŒã€‚
ğŸ“Œ æ”¯æŒæŒ‡ä»¤: /analyze <ç›®å½•è·¯å¾„> | /exit
ä½ > è¯·åœ¨æ•°æ®åº“ä¸­è®°å½•ï¼ŒRUMAG domain çš„fault10Handlerç±»æ¶‰åŠå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¯¹ç±»å†…ç®¡ç†çš„mapè®¿é—®éœ€è¦ä¿è¯mutexäº’æ–¥é”çš„æ­£ç¡®ä½¿ç”¨  
2026-01-21 21:05:21 - INFO - user_comm_agent - ğŸ“¦ å¤„ç†ç”¨æˆ·è¾“å…¥...
2026-01-21 21:05:21 - INFO - user_comm_agent - ğŸš€ å¼€å§‹AIå¯¹è¯å¤„ç†...
2026-01-21 21:05:21 - INFO - user_comm_agent - ğŸš€ å¼€å§‹AIå¯¹è¯å¤„ç†æµç¨‹...
2026-01-21 21:06:43 - INFO - user_comm_agent -  Raw AI Response: {
  "intent": "db",
  "explanation": "æ‚¨æåˆ°çš„å†…å®¹æ¶‰åŠåˆ°æ•°æ®åº“æ“ä½œï¼Œå…·ä½“æ˜¯è®°å½•RUMAG domainçš„fault10Handlerç±»åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨mutexäº’æ–¥é”ç®¡ç†mapçš„æ­£ç¡®å®è·µã€‚è¯·æä¾›ç›¸å…³æ•°æ®åº“è¡¨ç»“ æ„ã€æ•°æ®æˆ–å…·ä½“çš„æ›´æ–°è¯­å¥ï¼Œä»¥ä¾¿æˆ‘èƒ½å‡†ç¡®åœ°åœ¨æ•°æ®åº“ä¸­è¿›è¡Œè®°å½•ã€‚"
}
2026-01-21 21:06:43 - INFO - user_comm_agent - âœ… AIå›åº”ç”ŸæˆæˆåŠŸ: 116 å­—ç¬¦ (åŸå§‹é•¿åº¦: 157)
2026-01-21 21:06:43 - INFO - user_comm_agent - âœ… AIå›åº”ç”ŸæˆæˆåŠŸ: 116 å­—ç¬¦
2026-01-21 21:06:43 - INFO - user_comm_agent - ğŸ“¦ next_action=handle_db_tasks
2026-01-21 21:06:43 - INFO - user_comm_agent - âš ï¸ æ‚¨æåˆ°çš„å†…å®¹æ¶‰åŠåˆ°æ•°æ®åº“æ“ä½œï¼Œå…·ä½“æ˜¯è®°å½•RUMAG domainçš„fault10Handlerç±»åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨mutexäº’æ–¥é”ç®¡ç†map  çš„æ­£ç¡®å®è·µã€‚è¯·æä¾›ç›¸å…³æ•°æ®åº“è¡¨ç»“æ„ã€æ•°æ®æˆ–å…·ä½“çš„æ›´æ–°è¯­å¥ï¼Œä»¥ä¾¿æˆ‘èƒ½å‡†ç¡®åœ°åœ¨æ•°æ®åº“ä¸­è¿›è¡Œè®°å½•ã€‚
2026-01-21 21:06:43 - INFO - user_comm_agent - â³ åŒæ­¥æ‰§è¡Œ db_tasks â†’ db_manage_agent (count=0)
2026-01-21 21:06:43 - INFO - db_manage_agent - ğŸ“ å¼€å§‹è§£æç”¨æˆ·éœ€æ±‚ï¼Œä¼šè¯ID: cli_session
2026-01-21 21:06:55 - INFO - db_manage_agent - ğŸ§­ è¯†åˆ«æ•°æ®åº“æ„å›¾ mode=write
2026-01-21 21:06:55 - INFO - db_manage_agent - ğŸ“¥ DB Agent æ¥æ”¶åˆ°çš„ db_tasks: {"db_tasks": [{"description": "è¯·åœ¨æ•°æ®åº“ä¸­è®°å½•ï¼ŒRUMAG domain çš„fault10Handler ç±»æ¶‰åŠå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¯¹ç±»å†…ç®¡ç†çš„mapè®¿é—®éœ€è¦ä¿è¯mutexäº’æ–¥é”çš„æ­£ç¡®ä½¿ç”¨"}], "raw_text": "è¯·åœ¨æ•°æ®åº“ä¸­è®°å½•ï¼ŒRUMAG domain çš„fault10Handlerç±»æ¶‰åŠå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¯¹ç±»å†…ç®¡ç†çš„mapè®¿é—®éœ€è¦ä¿è¯mutexäº’æ–¥é”çš„æ­£ç¡®ä½¿ç”¨"}
2026-01-21 21:06:55 - INFO - db_manage_agent - â³ æ­£åœ¨è°ƒç”¨æ¨¡å‹ç”Ÿæˆç¿»è¯‘ç»“æœï¼Œè¯·ç¨å€™...
2026-01-21 21:09:33 - INFO - db_manage_agent - âœ… LLM ç¿»è¯‘å¾—åˆ° 3 æ¡ä»»åŠ¡
2026-01-21 21:09:33 - INFO - db_manage_agent - ğŸ“¥ DB Agent æ¥æ”¶åˆ°çš„ db_tasks: {"db_tasks": [{"description": "è¯·åœ¨æ•°æ®åº“ä¸­è®°å½•ï¼ŒRUMAG domain çš„fault10Handler ç±»æ¶‰åŠå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¯¹ç±»å†…ç®¡ç†çš„mapè®¿é—®éœ€è¦ä¿è¯mutexäº’æ–¥é”çš„æ­£ç¡®ä½¿ç”¨"}], "raw_text": "è¯·åœ¨æ•°æ®åº“ä¸­è®°å½•ï¼ŒRUMAG domain çš„fault10Handlerç±»æ¶‰åŠå¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œå¯¹ç±»å†…ç®¡ç†çš„mapè®¿é—®éœ€è¦ä¿è¯mutexäº’æ–¥é”çš„æ­£ç¡®ä½¿ç”¨", "issue_pattern": {"target": "issue_patterns", "action": "ADD", "data": {"pattern_id": "mutex_usage_pattern", "session_id": "RUMAG_fault10Handler", "issue_data": {"class": "fault10Handler", "property": "mutex", "problem": "Incorrect mutex usage"}}}}
2026-01-21 21:09:33 - INFO - db_manage_agent - â³ æ­£åœ¨è°ƒç”¨æ¨¡å‹ç”Ÿæˆç¿»è¯‘ç»“æœï¼Œè¯·ç¨å€™...
2026-01-21 21:10:32 - INFO - db_manage_agent - âœ… LLM ç¿»è¯‘å¾—åˆ° 1 æ¡ä»»åŠ¡
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ“œ LLM è§£æåçš„ç»“æ„åŒ–ä»»åŠ¡:
[
  {
    "target": "issue_patterns",
    "action": "ADD",
    "data": {
      "pattern_id": "mutex_usage_pattern",
      "session_id": "RUMAG_fault10Handler",
      "issue_data": {
        "class": "fault10Handler",
        "property": "mutex",
        "problem": "Incorrect mutex usage"
      }
    }
  }
]
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ§© æ‰§è¡Œæ•°æ®åº“ä»»åŠ¡ target=issue_pattern action=create keys=['pattern_id']
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ—„ï¸ å†™å…¥ issue_patterns: keys=['error_type', 'error_description', 'problematic_pattern', 'solution', 'severity', 'title', 'language', 'framework', 'file_pattern', 'class_pattern', 'tags', 'status']
2026-01-21 21:10:32 - WARNING - db_manage_agent - âš ï¸ æœªé…ç½® Weaviate clientï¼Œè·³è¿‡å‘é‡åŒæ­¥
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ§© æ‰§è¡Œæ•°æ®åº“ä»»åŠ¡ target=review_session action=upsert keys=['session_id', 'user_message', 'code_directory', 'status', 'code_patch', 'git_commit']
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ—„ï¸ å†™å…¥ review_sessions
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ§© æ‰§è¡Œæ•°æ®åº“ä»»åŠ¡ target=curated_issue action=upsert keys=['session_id', 'pattern_id', 'project_path', 'file_path', 'start_line', 'end_line', 'code_snippet', 'problem_phenomenon', 'root_cause', 'solution', 'severity', 'status']
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ—„ï¸ å†™å…¥ curated_issues
2026-01-21 21:10:32 - INFO - db_manage_agent - ğŸ“‹ æ•°æ®åº“å†™å…¥æ‘˜è¦:
+----------------+--------+---------+--------------------------------------------------------------------------------------------------------------------------------------+----+
| target         | action | status  | keys                                                                                                                                 | id |
+----------------+--------+---------+--------------------------------------------------------------------------------------------------------------------------------------+----+
| issue_pattern  | create | success | pattern_id                                                                                                                           | 1  |
| review_session | upsert | success | code_directory,code_patch,git_commit,session_id,status,user_message                                                                  | 2  |
| curated_issue  | upsert | success | code_snippet,end_line,file_path,pattern_id,problem_phenomenon,project_path,root_cause,session_id,severity,solution,start_line,status | 2  |
+----------------+--------+---------+--------------------------------------------------------------------------------------------------------------------------------------+----+
2026-01-21 21:10:32 - INFO - user_comm_agent - âœ… DB ä»»åŠ¡æ‰§è¡Œå®Œæˆ status=success
ä½ > /exit
ğŸ‘‹ ä¼šè¯ç»“æŸï¼Œæ„Ÿè°¢ä½¿ç”¨ MASã€‚