{
  "status": "completed",
  "requirement_id": 1003,
  "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
  "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1",
  "issue_count": 30,
  "severity_stats": {
    "low": 25,
    "medium": 5
  },
  "issues": [
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 47,
      "description": "Line too long (111 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 49,
      "description": "Line too long (94 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 50,
      "description": "Line too long (80 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 58,
      "description": "Line too long (83 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 100,
      "description": "Line too long (83 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 104,
      "description": "Line too long (93 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 109,
      "description": "Line too long (117 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 130,
      "description": "Line too long (101 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 176,
      "description": "Line too long (91 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 194,
      "description": "Line too long (85 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 209,
      "description": "Line too long (80 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 235,
      "description": "Line too long (80 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 273,
      "description": "Line too long (92 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 294,
      "description": "Line too long (86 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 295,
      "description": "Line too long (87 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 300,
      "description": "Line too long (82 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 343,
      "description": "Line too long (81 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 348,
      "description": "Line too long (84 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 352,
      "description": "Line too long (86 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 374,
      "description": "Line too long (96 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "style",
      "severity": "low",
      "line": 387,
      "description": "Line too long (122 > 79 characters)",
      "tool": "pep8_checker",
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "medium",
      "line": null,
      "description": "嵌套循环性能瓶颈 (第238行)\n  - 嵌套层级: 2层\n  - 外层循环: for name, class_name in active_agents.items():\n  - 内层循环: total_reports = sum(len(files) for files in reports.values())\n  - 性能影响: 时间复杂度可能达到 O(n^2)\n  - 建议: 考虑使用AST解析、字典查找或生成器优化",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "medium",
      "line": null,
      "description": "嵌套循环性能瓶颈 (第370行)\n  - 嵌套层级: 2层\n  - 外层循环: for f in consolidated_files:\n  - 内层循环: for it in data.get('issues', []):\n  - 性能影响: 时间复杂度可能达到 O(n^2)\n  - 建议: 考虑使用AST解析、字典查找或生成器优化",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "medium",
      "line": null,
      "description": "递归函数性能风险 - login\n  - 函数名称: login\n  - 递归调用: asyncio.run(_login_entry(target_dir))\n  - 性能影响: 可能导致栈溢出或指数级时间复杂度\n  - 建议: 检查是否有终止条件、考虑使用迭代或尾递归优化、添加缓存(memoization)",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "medium",
      "line": null,
      "description": "递归函数性能风险 - status\n  - 函数名称: status\n  - 递归调用: asyncio.run(_status_entry())\n  - 性能影响: 可能导致栈溢出或指数级时间复杂度\n  - 建议: 检查是否有终止条件、考虑使用迭代或尾递归优化、添加缓存(memoization)",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "medium",
      "line": null,
      "description": "递归函数性能风险 - config\n  - 函数名称: config\n  - 递归调用: config_manager = get_ai_agent_config()\n  - 性能影响: 可能导致栈溢出或指数级时间复杂度\n  - 建议: 检查是否有终止条件、考虑使用迭代或尾递归优化、添加缓存(memoization)",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "low",
      "line": null,
      "description": "数据库I/O操作 (第27行)\n  - 操作代码: sys.path.insert(0, project_root)\n  - 匹配模式: insert\n  - 性能影响: 数据库查询可能成为性能瓶颈\n  - 优化建议: 使用连接池、批量查询、添加索引、考虑使用缓存(Redis)、使用异步数据库驱动",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "low",
      "line": null,
      "description": "文件I/O操作 (第149行)\n  - 操作代码: user = await asyncio.to_thread(lambda: input(\"你> \").strip())\n  - 匹配模式: read(\n  - 性能影响: 可能导致磁盘I/O阻塞\n  - 优化建议: 使用异步文件操作(aiofiles)、批量读写、添加缓存机制",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "low",
      "line": null,
      "description": "数据库I/O操作 (第224行)\n  - 操作代码: sys.path.insert(0, project_root)\n  - 匹配模式: insert\n  - 性能影响: 数据库查询可能成为性能瓶颈\n  - 优化建议: 使用连接池、批量查询、添加索引、考虑使用缓存(Redis)、使用异步数据库驱动",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    },
    {
      "requirement_id": 1003,
      "file": "/var/fpwork/tiyi/project/MAS/MAS/api/main.py",
      "source": "performance_bottleneck",
      "severity": "low",
      "line": null,
      "description": "数据库I/O操作 (第270行)\n  - 操作代码: sys.path.insert(0, project_root)\n  - 匹配模式: insert\n  - 性能影响: 数据库查询可能成为性能瓶颈\n  - 优化建议: 使用连接池、批量查询、添加索引、考虑使用缓存(Redis)、使用异步数据库驱动",
      "tool": null,
      "run_id": "ff2a16c8-ea03-4e68-ad57-79603f929de1"
    }
  ],
  "analysis_types": [
    "security_analysis",
    "ai_analysis",
    "static_analysis",
    "performance_analysis"
  ],
  "readable_file": "api/main.py",
  "sanitized_name": "api_main.py"
}